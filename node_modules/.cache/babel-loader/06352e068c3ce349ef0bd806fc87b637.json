{"remainingRequest":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dell\\Desktop\\Full_Version\\src\\components\\event\\data\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\src\\components\\event\\data\\index.vue","mtime":1659970386316},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\babel-loader\\lib\\index.js","mtime":1659972865660},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js","mtime":1659972866064}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9kZWxsL0Rlc2t0b3AvRnVsbF9WZXJzaW9uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciAkID0gd2luZG93LiQ7CmltcG9ydCBSZXBvcnQgZnJvbSAnLi9yZXBvcnQnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOwppbXBvcnQgeyByYW5kb21TdHJpbmcgfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IHsgUkFORE9NX0NBUlRPT05fQVZBVEFSX1VSTCB9IGZyb20gJ0AvY29uc3RhbnRzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBldmVudFByb3A6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFJlcG9ydDogUmVwb3J0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXZlbnQ6IHVuZGVmaW5lZCwKICAgICAgc3RlcDogJ0RFVEFJTFMnLAogICAgICBkaXNwbGF5TmFtZTogdW5kZWZpbmVkLAogICAgICBwaG90b1VSTDogdW5kZWZpbmVkLAogICAgICB1c2VySWQ6IHVuZGVmaW5lZCwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuZXZlbnRQcm9wKSB7CiAgICAgIHRoaXMuZXZlbnQgPSB0aGlzLmV2ZW50UHJvcDsKICAgIH0KCiAgICB0aGlzLmRpc3BsYXlOYW1lID0gJ0d1ZXN0XycgKyByYW5kb21TdHJpbmcoNSk7CiAgICB0aGlzLnBob3RvVVJMID0gUkFORE9NX0NBUlRPT05fQVZBVEFSX1VSTCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKyAnLnBuZyc7CiAgICB2YXIgdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsKCiAgICBpZiAodXNlciAmJiB1c2VyLmRpc3BsYXlOYW1lKSB7CiAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSB1c2VyLmRpc3BsYXlOYW1lOwogICAgfQoKICAgIGlmICh1c2VyICYmIHVzZXIucGhvdG9VUkwpIHsKICAgICAgdGhpcy5waG90b1VSTCA9IHVzZXIucGhvdG9VUkw7CiAgICB9CgogICAgaWYgKHVzZXIgJiYgdXNlci51aWQpIHsKICAgICAgdGhpcy51c2VySWQgPSB1c2VyLnVpZDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVNldFN0ZXA6IGZ1bmN0aW9uIGhhbmRsZVNldFN0ZXAoc3RlcCkgewogICAgICB0aGlzLnN0ZXAgPSBzdGVwOwogICAgfSwKICAgIGhhbmRsZVRvZ2dsZU1vZGFsOiBmdW5jdGlvbiBoYW5kbGVUb2dnbGVNb2RhbCgpIHsKICAgICAgJCgnI2V2ZW50RGV0YWlsc01vZGFsJykubW9kYWwoJ3RvZ2dsZScpOwogICAgfSwKICAgIGhhbmRsZUFkZFVwZGF0ZTogZnVuY3Rpb24gaGFuZGxlQWRkVXBkYXRlKGV2ZW50KSB7CiAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlTW9kYWwoKTsKICAgICAgdGhpcy4kZW1pdCgnYWRkLXRvLWNvbXBhcmFpc29uJywgZXZlbnQpOwogICAgfSwKICAgIGhhbmRsZUFkZENvbW1lbnQ6IGZ1bmN0aW9uIGhhbmRsZUFkZENvbW1lbnQoJGV2ZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY29tbWVudCA9IHsKICAgICAgICB0ZXh0OiAkZXZlbnQsCiAgICAgICAgaWQ6IHJhbmRvbVN0cmluZygxNSksCiAgICAgICAgZGlzcGxheU5hbWU6IHRoaXMuZGlzcGxheU5hbWUsCiAgICAgICAgY3JlYXRpb25UaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICBwaG90b1VSTDogdGhpcy5waG90b1VSTAogICAgICB9OwoKICAgICAgaWYgKHRoaXMudXNlcklkKSB7CiAgICAgICAgY29tbWVudFsndXNlcklkJ10gPSB0aGlzLnVzZXJJZDsKICAgICAgfQoKICAgICAgdmFyIGNvbW1lbnRzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmV2ZW50LmNvbW1lbnRzKSwgW2NvbW1lbnRdKTsKICAgICAgdmFyIGZpcmVzdG9yZSA9IGZpcmViYXNlLmZpcmVzdG9yZSgpOwogICAgICB2YXIgY29sbGVjdGlvbiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdldmVudHMnKTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgY29sbGVjdGlvbi5kb2ModGhpcy5ldmVudC5pZCkudXBkYXRlKHsKICAgICAgICBjb21tZW50czogY29tbWVudHMKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29sbGVjdGlvbi5kb2MoX3RoaXMuZXZlbnQuaWQpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy5ldmVudCA9IHJlc3BvbnNlLmRhdGEoKTsKCiAgICAgICAgICBfdGhpcy4kZW1pdCgndXBkYXRlLWV2ZW50cycpOwoKICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    class=\"modal fade\"\n    id=\"eventDetailsModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-lg\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5\n            :class=\"`modal-title with-pointer ${\n              step === 'COMMENTS' ? 'text-muted' : ''\n            }`\"\n            @click=\"handleSetStep('DETAILS')\"\n          >\n            Details\n          </h5>\n          <button\n            type=\"button\"\n            class=\"close\"\n            data-dismiss=\"modal\"\n            aria-label=\"Close\"\n            @click=\"handleToggleModal\"\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <report v-show=\"step === 'DETAILS'\" v-if=\"event\" :event=\"event\" />\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            @click=\"handleToggleModal\"\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-dismiss=\"modal\"\n          >\n            Close\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-primary\"\n            @click=\"handleAddUpdate(event)\"\n          >\n            Update\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst $ = window.$\nimport Report from './report'\nimport firebase from 'firebase'\nimport { randomString } from '@/utils'\nimport { RANDOM_CARTOON_AVATAR_URL } from '@/constants'\nexport default {\n  props: {\n    eventProp: {\n      type: Object,\n      default: undefined,\n    },\n  },\n  components: {\n    Report,\n  },\n  data() {\n    return {\n      event: undefined,\n      step: 'DETAILS',\n      displayName: undefined,\n      photoURL: undefined,\n      userId: undefined,\n      loading: false,\n    }\n  },\n  mounted() {\n    if (this.eventProp) {\n      this.event = this.eventProp\n    }\n\n    this.displayName = 'Guest_' + randomString(5)\n    this.photoURL =\n      RANDOM_CARTOON_AVATAR_URL + Math.floor(Math.random() * 100) + '.png'\n\n    const user = firebase.auth().currentUser\n    if (user && user.displayName) {\n      this.displayName = user.displayName\n    }\n    if (user && user.photoURL) {\n      this.photoURL = user.photoURL\n    }\n    if (user && user.uid) {\n      this.userId = user.uid\n    }\n  },\n  methods: {\n    handleSetStep(step) {\n      this.step = step\n    },\n    handleToggleModal() {\n      $('#eventDetailsModal').modal('toggle')\n    },\n    handleAddUpdate(event) {\n      this.handleToggleModal()\n      this.$emit('add-to-comparaison', event)\n    },\n    handleAddComment($event) {\n      const comment = {\n        text: $event,\n        id: randomString(15),\n        displayName: this.displayName,\n        creationTime: new Date().getTime(),\n        photoURL: this.photoURL,\n      }\n      if (this.userId) {\n        comment['userId'] = this.userId\n      }\n      const comments = [...this.event.comments, comment]\n      const firestore = firebase.firestore()\n      const collection = firestore.collection('events')\n      this.loading = true\n      collection\n        .doc(this.event.id)\n        .update({\n          comments,\n        })\n        .then(() => {\n          collection\n            .doc(this.event.id)\n            .get()\n            .then((response) => {\n              this.event = response.data()\n              this.$emit('update-events')\n              this.loading = false\n            })\n            .catch((error) => {\n              console.log(error)\n            })\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n  },\n}\n</script>\n\n<style scoped>\n.with-pointer {\n  cursor: pointer;\n}\n</style>\n"],"sourceRoot":"src/components/event/data"}]}