{"remainingRequest":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dell\\Desktop\\Full_Version\\src\\views\\events\\new\\index.vue?vue&type=style&index=0&id=88ef1072&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\src\\views\\events\\new\\index.vue","mtime":1659969786602},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\css-loader\\dist\\cjs.js","mtime":1659972865126},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1659972866505},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\postcss-loader\\src\\index.js","mtime":1659972865655},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js","mtime":1659972866064}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaGVhZGVyIHsKICBwYWRkaW5nOiAxNTZweCAwIDEwMHB4Owp9CgpzZWN0aW9uIHsKICBwYWRkaW5nOiAxNTBweCAwOwp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/events/new","sourcesContent":["<template>\n  <div>\n    <full-page-loader v-show=\"showLoader\" />\n    <div v-show=\"!showLoader\">\n      <navbar />\n      <featured ref=\"featured\" theme=\"bg-wael text-white\" />\n      <event-form\n        @submit=\"handleSubmit\"\n        :loading=\"loading\"\n        :isEmployee=\"isEmployee\"\n      />\n      <app-footer />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navbar from '@/components/navbar'\nimport Featured from '@/components/featured'\nimport EventForm from '@/components/forms/event'\nimport AppFooter from '@/components/app-footer'\nimport firebase from 'firebase'\nimport Swal from 'sweetalert2'\nimport { randomString } from '@/utils'\nimport { BUSINESS_DOMAIN } from '../../../constants'\nimport FullPageLoader from '@/components/loaders/full-page-loader'\nexport default {\n  name: 'NewEvent',\n  components: {\n    Navbar,\n    Featured,\n    EventForm,\n    AppFooter,\n    FullPageLoader,\n  },\n  data() {\n    return { showLoader: true, loading: false, isEmployee: false }\n  },\n  mounted() {\n    setTimeout(() => {\n      this.showLoader = false\n    }, 100)\n    if (!firebase.auth().currentUser) {\n      this.$router.push({ path: '/' })\n    }\n    if (\n      firebase.auth().currentUser.email.includes(BUSINESS_DOMAIN) &&\n      !firebase.auth().currentUser.emailVerified\n    ) {\n      alert('Please verify your email')\n      location.replace('/')\n    }\n    if (\n      firebase.auth().currentUser.email.includes(BUSINESS_DOMAIN) &&\n      firebase.auth().currentUser.emailVerified\n    ) {\n      this.isEmployee = true\n    }\n  },\n  methods: {\n    handleSubmit(data) {\n      const featured = this.$refs['featured']\n      const { latitude, longitude } = featured\n      if (!latitude || !longitude) {\n        alert('Please pick a location on the map')\n      } else {\n        const {\n          email,\n          displayName,\n          photoURL,\n          uid,\n        } = firebase.auth().currentUser\n        const id = randomString(15)\n        const event = {\n          ...data,\n          email,\n          displayName,\n          photoURL,\n          uid,\n          latitude,\n          longitude,\n          id,\n        }\n        const firestore = firebase.firestore()\n        const collection = firestore.collection('events')\n        collection\n          .doc(id)\n          .set(event)\n          .then(() => {\n            this.loading = false\n            Swal.fire({\n              title: 'Event created',\n              text: 'Do you want to view its details?',\n              icon: 'success',\n              showCancelButton: true,\n              confirmButtonText: 'View details',\n              cancelButtonText: 'Dismiss',\n            }).then((result) => {\n              if (result.value) {\n                this.$router.push({\n                  path: `/?latitude=${featured.latitude}&longitude=${featured.longitude}`,\n                })\n                window.scrollTo({ top: 0, behavior: 'smooth' })\n              }\n            })\n          })\n          .catch((error) => {\n            this.loading = false\n            Swal.fire('Oops...', 'Something went wrong!', 'error')\n            console.log(error)\n          })\n      }\n    },\n  },\n}\n</script>\n<style scoped>\nheader {\n  padding: 156px 0 100px;\n}\n\nsection {\n  padding: 150px 0;\n}\n</style>\n"]}]}