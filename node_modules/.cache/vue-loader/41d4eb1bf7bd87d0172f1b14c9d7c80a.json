{"remainingRequest":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dell\\Desktop\\Full_Version\\src\\components\\navbar\\index.vue?vue&type=style&index=0&id=62be66ba&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\src\\components\\navbar\\index.vue","mtime":1659970463857},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\css-loader\\dist\\cjs.js","mtime":1659972865126},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1659972866505},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\postcss-loader\\src\\index.js","mtime":1659972865655},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js","mtime":1659972866064}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi53aXRoLXBvaW50ZXIgewogIGN1cnNvcjogcG9pbnRlcjsKfQouYXZhdGFyIHsKICB3aWR0aDogMjRweDsKICBoZWlnaHQ6IDI0cHg7CiAgYm9yZGVyLXJhZGl1czogMTJweDsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/navbar","sourcesContent":["<template>\n  <!-- Navigation -->\n  <div>\n    <nav\n      class=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\"\n      id=\"mainNav\"\n    >\n      <div class=\"container\">\n        <router-link to=\"/\"\n          ><li class=\"navbar-brand js-scroll-trigger text-white\">\n            <i class=\"fa fa-calendar mr-2\"></i>{{ $t(\"home.title\") }}\n          </li></router-link\n        >\n        <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarResponsive\"\n          aria-controls=\"navbarResponsive\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n          @click=\"handleToggleToolbar\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarResponsive\">\n          <ul class=\"navbar-nav ml-auto\">\n            <li class=\"nav-item\" v-if=\"!user\" @click=\"handleToggleModalClick\">\n              <a class=\"nav-link with-pointer js-scroll-trigger\">\n                {{ $t(\"navbar.login\") }}\n              </a>\n            </li>\n            <li class=\"nav-item dropdown\" v-if=\"user\">\n              <a\n                class=\"nav-link dropdown-toggle\"\n                href=\"#\"\n                id=\"navbarDropdown\"\n                role=\"button\"\n                data-toggle=\"navbar-dropdown\"\n                aria-haspopup=\"true\"\n                aria-expanded=\"false\"\n                @click=\"handleToggleDropdown\"\n              >\n                <i class=\"fa fa-circle-o-notch fa-spin mr-2\" v-if=\"loading\"></i>\n                <span v-if=\"!user.displayName && user.email\">{{\n                  user.email\n                }}</span>\n                <span v-if=\"user.displayName\">{{ user.displayName }}</span>\n                <img\n                  v-if=\"!user.photoURL\"\n                  :src=\"defaultPhoto\"\n                  class=\"avatar ml-2\"\n                />\n                <img\n                  v-if=\"user.photoURL\"\n                  :src=\"user.photoURL\"\n                  class=\"avatar ml-2\"\n                />\n              </a>\n              <div\n                class=\"dropdown-menu\"\n                aria-labelledby=\"navbarDropdown\"\n                id=\"navbar-dropdown\"\n              >\n                <a\n                  class=\"dropdown-item with-pointer\"\n                  role=\"button\"\n                  @click=\"handleToggleNameModalClick\"\n                  ><i class=\"fa fa-pencil mr-3\"></i>\n                  {{ $t(\"navbar.updateName\") }}\n                </a>\n                <div class=\"dropdown-divider\"></div>\n                <a\n                  class=\"dropdown-item with-pointer\"\n                  role=\"button\"\n                  @click=\"handleLogout\"\n                  ><i class=\"fa fa-sign-out mr-3\"></i> {{ $t(\"navbar.logout\") }}\n                </a>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n    <input\n      type=\"file\"\n      id=\"input-upload\"\n      ref=\"fileInput\"\n      @change=\"handleUploadPhoto\"\n    />\n    <div\n      class=\"modal fade\"\n      id=\"updateNameModal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"updateNameModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"updateNameModalLabel\">\n              Update your name\n            </h5>\n            <button\n              @click=\"handleToggleNameModalClick\"\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <form>\n              <div class=\"form-row\">\n                <div class=\"form-group col-md-6\">\n                  <label for=\"firstName\">First Name</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"inputFirstName\"\n                    placeholder=\"First Name\"\n                    v-model=\"firstName\"\n                  />\n                </div>\n                <div class=\"form-group col-md-6\">\n                  <label for=\"inputLastName\">Last Name</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"inputLastName\"\n                    placeholder=\"Last Name\"\n                    v-model=\"lastName\"\n                  />\n                </div>\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer\">\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-dismiss=\"modal\"\n              @click=\"handleToggleNameModalClick\"\n            >\n              Close\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-primary\"\n              @click=\"handleUpdateName\"\n            >\n              Update name\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div\n      class=\"modal fade\"\n      id=\"updateEmailModal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"updateEmailModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"updateEmailModalLabel\">\n              Update your email\n            </h5>\n            <button\n              @click=\"handleToggleEmailModalClick\"\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <form>\n              <div class=\"form-row\">\n                <div class=\"form-group col-md-6\">\n                  <label for=\"email\">Email</label>\n                  <input\n                    type=\"email\"\n                    class=\"form-control\"\n                    id=\"inputEmail\"\n                    placeholder=\"New Email\"\n                    v-model=\"email\"\n                  />\n                </div>\n              </div>\n            </form>\n          </div>\n          <div class=\"modal-footer\">\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-dismiss=\"modal\"\n              @click=\"handleToggleEmailModalClick\"\n            >\n              Close\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-primary\"\n              @click=\"handleUpdateEmail\"\n            >\n              Update email\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst $ = window.$;\nimport firebase from \"firebase\";\nimport { BUSINESS_DOMAIN } from \"../../constants\";\nexport default {\n  data() {\n    return {\n      user: undefined,\n      fileInput: undefined,\n      loading: false,\n      defaultPhoto: process.env.BASE_URL + \"images/avatar.png\",\n      firstName: undefined,\n      lastName: undefined,\n      email: undefined,\n      showVerifyEmail: false,\n    };\n  },\n  mounted() {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user != null) {\n        this.user = user;\n        if (\n          // user.email.includes(\"@infopro-digital.com\") &&\n          user.email.includes(BUSINESS_DOMAIN) &&\n          user.emailVerified === false\n        ) {\n          this.showVerifyEmail = true;\n        }\n      } else {\n        console.log(\"No user\");\n      }\n    });\n    this.fileInput = this.$refs[\"fileInput\"];\n  },\n  methods: {\n    handleUploadPhoto($event) {\n      this.loading = true;\n      const file = $event.target.files[0];\n      const storageRef = firebase\n        .storage()\n        .ref(\"photos/\" + this.user.uid + \".png\");\n      const task = storageRef.put(file);\n      task.on(\n        \"state_changed\",\n        () => {\n          // console.log(snapshot);\n        },\n        (error) => {\n          console.log(error);\n        },\n        () => {\n          task.snapshot.ref.getDownloadURL().then((photoURL) => {\n            firebase\n              .auth()\n              .currentUser.updateProfile({ photoURL })\n              .then(() => {\n                this.user = firebase.auth().currentUser;\n                this.loading = false;\n                location.reload();\n              })\n              .catch((error) => {\n                this.loading = false;\n                console.log(error);\n              });\n          });\n        }\n      );\n    },\n    handleLogout() {\n      if (confirm(\"Are you sure to logout?\")) {\n        firebase\n          .auth()\n          .signOut()\n          .then(() => {\n            location.reload();\n          })\n          .catch((error) => {\n            alert(\"Oops, an error happened!\");\n            console.log(error);\n          });\n      }\n    },\n    handleToggleDropdown() {\n      $(\"#navbar-dropdown\").collapse(\"toggle\");\n    },\n    handleToggleToolbar() {\n      $(\"#navbarResponsive\").collapse(\"toggle\");\n    },\n    handleUploadPhotoClick() {\n      $(\"#navbar-dropdown\").collapse(\"hide\");\n      this.fileInput.click();\n    },\n    handleToggleModalClick() {\n      this.$emit(\"toggle-modal\");\n    },\n    handleToggleNameModalClick() {\n      $(\"#updateNameModal\").modal(\"toggle\");\n    },\n    handleToggleEmailModalClick() {\n      $(\"#updateEmailModal\").modal(\"toggle\");\n    },\n    handleUpdateName() {\n      if (this.firstName && this.lastName) {\n        firebase\n          .auth()\n          .currentUser.updateProfile({\n            displayName: this.firstName + \" \" + this.lastName,\n          })\n          .then(() => location.reload())\n          .catch((error) => {\n            console.log(error);\n            alert(\"Error happened!\");\n          });\n      }\n    },\n    handleUpdateEmail() {\n      if (this.email) {\n        firebase\n          .auth()\n          .currentUser.updateEmail(this.email)\n          .then(() => location.reload())\n          .catch((error) => {\n            console.log(error);\n            alert(\"Error happened!\");\n          });\n      }\n    },\n    handleVerifyEmail() {\n      // const v = firebase.auth().currentUser.emailVerified;\n      // if (v) console.log(firebase.auth().currentUser);\n      const email = firebase.auth().currentUser.email;\n      firebase\n        .auth()\n        .currentUser.sendEmailVerification()\n        .then(() => {\n          alert(\"Verification email sent\");\n          // The link was successfully sent. Inform the user.\n          // Save the email locally so you don't need to ask the user for it again\n          // if they open the link on the same device.\n          window.localStorage.setItem(\"emailForSignIn\", email);\n          // ...\n        })\n        .catch((error) => {\n          var errorCode = error.code;\n          var errorMessage = error.message;\n          console.log(errorCode);\n          console.log(errorMessage);\n          // ...\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.with-pointer {\n  cursor: pointer;\n}\n.avatar {\n  width: 24px;\n  height: 24px;\n  border-radius: 12px;\n}\n</style>\n"]}]}