{"remainingRequest":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dell\\Desktop\\Full_Version\\src\\components\\featured\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\src\\components\\featured\\index.vue","mtime":1659969786602},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\babel-loader\\lib\\index.js","mtime":1659972865660},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js","mtime":1659972866064}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTZWFyY2hGb3JtIGZyb20gIkAvY29tcG9uZW50cy9mZWF0dXJlZC9tYXBzL3NlYXJjaC1mb3JtIjsKaW1wb3J0IE1hcHMgZnJvbSAiQC9jb21wb25lbnRzL2ZlYXR1cmVkL21hcHMvaW5kZXgudnVlIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB6b29tUHJvcDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZCwKICAgIH0sCiAgICBjZW50ZXJQcm9wOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogdW5kZWZpbmVkLAogICAgfSwKICAgIHRoZW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogImJnLXByaW1hcnkgdGV4dC13aGl0ZSIKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtYXA6IG51bGwsCiAgICAgIGxvbmdpdHVkZTogbnVsbCwKICAgICAgbGF0aXR1ZGU6IG51bGwsCiAgICAgIGV2ZW50czogW10sCiAgICAgIGNlbnRlcjogeyBsYXQ6IDM2Ljc5NTE4NzIsIGxuZzogMTAuMTk0MTI0OCB9LAogICAgICB6b29tOiAxMiwKICAgICAgZ21hcmE6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgU2VhcmNoRm9ybSwKICAgIE1hcHMsCiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgZmlyZXN0b3JlID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CiAgICBjb25zdCBjb2xsZWN0aW9uID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oImV2ZW50cyIpOwogICAgY29sbGVjdGlvbgogICAgICAuZ2V0KCkKICAgICAgLnRoZW4oKHsgZG9jcyB9KSA9PiB7CiAgICAgICAgZG9jcy5mb3JFYWNoKChldmVudCkgPT4gewogICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB7CiAgICAgICAgICAgIGxhdDogZXZlbnQuZGF0YSgpLmxhdGl0dWRlLAogICAgICAgICAgICBsbmc6IGV2ZW50LmRhdGEoKS5sb25naXR1ZGUsCiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgLi4uZXZlbnQuZGF0YSgpLAogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IHN1YiA9IHsgcG9zaXRpb24sIGRhdGEgfTsKICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goc3ViKTsKICAgICAgICB9KTsKICAgICAgfSkKICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZU1hcExvYWRlZChtYXApIHsKICAgICAgdGhpcy5tYXAgPSBtYXA7CiAgICAgIGlmICh0aGlzLmNlbnRlclByb3AgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuY2VudGVyID0gdGhpcy5jZW50ZXJQcm9wOwogICAgICB9CiAgICAgIGlmICh0aGlzLnpvb21Qcm9wICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLnpvb20gPSB0aGlzLnpvb21Qcm9wOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlUGxhY2VDaGFuZ2UocGxhY2UpIHsKICAgICAgdGhpcy5jZW50ZXIgPSBwbGFjZS5jZW50ZXI7CiAgICAgIHRoaXMuem9vbSA9IHBsYWNlLnpvb207CiAgICB9LAogICAgaGFuZGxlUG9zaXRpb25NYXJraW5nKHBvc2l0aW9uKSB7CiAgICAgIHRoaXMubG9uZ2l0dWRlID0gcG9zaXRpb24ubG9uZ2l0dWRlOwogICAgICB0aGlzLmxhdGl0dWRlID0gcG9zaXRpb24ubGF0aXR1ZGU7CiAgICAgIHRoaXMuZ21hcmEgPSB0cnVlCiAgICB9LAogICAgaGFuZGxlQWRkVG9Db21wYXJhaXNvbigkZXZlbnQpIHsKICAgICAgdGhpcy4kZW1pdCgiYWRkLXRvLWNvbXBhcmFpc29uIiwgJGV2ZW50KTsKICAgIH0sCiAgICBoYW5kbGVVcGRhdGVFdmVudHMoKSB7CiAgICAgIGNvbnN0IGZpcmVzdG9yZSA9IGZpcmViYXNlLmZpcmVzdG9yZSgpOwogICAgICBjb25zdCBjb2xsZWN0aW9uID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oImV2ZW50cyIpOwogICAgICBjb2xsZWN0aW9uCiAgICAgICAgLmdldCgpCiAgICAgICAgLnRoZW4oKHsgZG9jcyB9KSA9PiB7CiAgICAgICAgICBkb2NzLmZvckVhY2goKGV2ZW50KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gewogICAgICAgICAgICAgIGxhdDogZXZlbnQuZGF0YSgpLmxhdGl0dWRlLAogICAgICAgICAgICAgIGxuZzogZXZlbnQuZGF0YSgpLmxvbmdpdHVkZSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAuLi5ldmVudC5kYXRhKCksCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHN1YiA9IHsgcG9zaXRpb24sIGRhdGEgfTsKICAgICAgICAgICAgdGhpcy5ldmVudHMucHVzaChzdWIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/featured","sourcesContent":["<template>\n  <header :class=\"theme\">\n    <div class=\"container\">\n      <div class=\"col-md-8 mb-3\">\n        <p>{{ $t(\"featured.text\") }}</p>\n\n        <search-form v-if=\"map\" @place-changed=\"handlePlaceChange\" />\n      </div>\n      <div class=\"col-md-12\">\n        <maps\n          :center=\"center\"\n          :zoom=\"zoom\"\n          :key=\"center.lat\"\n          :events=\"events\"\n          @map-loaded=\"handleMapLoaded\"\n          @position-marked=\"handlePositionMarking\"\n          @add-to-comparaison=\"handleAddToComparaison\"\n          @update-events=\"handleUpdateEvents\"\n        />\n      </div>\n      <p class=\"lead col-md-12 mt-2\">\n        <i class=\"fa fa-map-marker text-success mr-1\"></i>\n        <small>{{ $t(\"featured.legend_sport\") }}</small>\n        <i class=\"fa fa-map-marker text-danger ml-4 mr-1\"></i>\n        <small>{{ $t(\"featured.legend_cultural\") }}</small>\n      </p>\n    </div>\n  </header>\n</template>\n\n<script>\nimport SearchForm from \"@/components/featured/maps/search-form\";\nimport Maps from \"@/components/featured/maps/index.vue\";\nimport firebase from \"firebase\";\nexport default {\n  props: {\n    zoomProp: {\n      type: Number,\n      default: undefined,\n    },\n    centerProp: {\n      type: Object,\n      default: undefined,\n    },\n    theme: {\n      type: String,\n      default: \"bg-primary text-white\"\n    }\n  },\n  data() {\n    return {\n      map: null,\n      longitude: null,\n      latitude: null,\n      events: [],\n      center: { lat: 36.7951872, lng: 10.1941248 },\n      zoom: 12,\n      gmara: false\n    };\n  },\n  components: {\n    SearchForm,\n    Maps,\n  },\n  mounted() {\n    const firestore = firebase.firestore();\n    const collection = firestore.collection(\"events\");\n    collection\n      .get()\n      .then(({ docs }) => {\n        docs.forEach((event) => {\n          const position = {\n            lat: event.data().latitude,\n            lng: event.data().longitude,\n          };\n          const data = {\n            ...event.data(),\n          };\n          const sub = { position, data };\n          this.events.push(sub);\n        });\n      })\n      .catch((error) => console.log(error));\n  },\n  methods: {\n    handleMapLoaded(map) {\n      this.map = map;\n      if (this.centerProp !== undefined) {\n        this.center = this.centerProp;\n      }\n      if (this.zoomProp !== undefined) {\n        this.zoom = this.zoomProp;\n      }\n    },\n    handlePlaceChange(place) {\n      this.center = place.center;\n      this.zoom = place.zoom;\n    },\n    handlePositionMarking(position) {\n      this.longitude = position.longitude;\n      this.latitude = position.latitude;\n      this.gmara = true\n    },\n    handleAddToComparaison($event) {\n      this.$emit(\"add-to-comparaison\", $event);\n    },\n    handleUpdateEvents() {\n      const firestore = firebase.firestore();\n      const collection = firestore.collection(\"events\");\n      collection\n        .get()\n        .then(({ docs }) => {\n          docs.forEach((event) => {\n            const position = {\n              lat: event.data().latitude,\n              lng: event.data().longitude,\n            };\n            const data = {\n              ...event.data(),\n            };\n            const sub = { position, data };\n            this.events.push(sub);\n          });\n        })\n        .catch((error) => console.log(error));\n    },\n  },\n};\n</script>\n<style scoped>\n.bg-wael {\n  background-color: gray;\n}\n</style>"]}]}