{"remainingRequest":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dell\\Desktop\\Full_Version\\src\\views\\events\\new\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\src\\views\\events\\new\\index.vue","mtime":1659969786602},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\babel-loader\\lib\\index.js","mtime":1659972865660},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659972864654},{"path":"C:\\Users\\dell\\Desktop\\Full_Version\\node_modules\\vue-loader\\lib\\index.js","mtime":1659972866064}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZiYXIgZnJvbSAnQC9jb21wb25lbnRzL25hdmJhcicKaW1wb3J0IEZlYXR1cmVkIGZyb20gJ0AvY29tcG9uZW50cy9mZWF0dXJlZCcKaW1wb3J0IEV2ZW50Rm9ybSBmcm9tICdAL2NvbXBvbmVudHMvZm9ybXMvZXZlbnQnCmltcG9ydCBBcHBGb290ZXIgZnJvbSAnQC9jb21wb25lbnRzL2FwcC1mb290ZXInCmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZScKaW1wb3J0IFN3YWwgZnJvbSAnc3dlZXRhbGVydDInCmltcG9ydCB7IHJhbmRvbVN0cmluZyB9IGZyb20gJ0AvdXRpbHMnCmltcG9ydCB7IEJVU0lORVNTX0RPTUFJTiB9IGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cycKaW1wb3J0IEZ1bGxQYWdlTG9hZGVyIGZyb20gJ0AvY29tcG9uZW50cy9sb2FkZXJzL2Z1bGwtcGFnZS1sb2FkZXInCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTmV3RXZlbnQnLAogIGNvbXBvbmVudHM6IHsKICAgIE5hdmJhciwKICAgIEZlYXR1cmVkLAogICAgRXZlbnRGb3JtLAogICAgQXBwRm9vdGVyLAogICAgRnVsbFBhZ2VMb2FkZXIsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsgc2hvd0xvYWRlcjogdHJ1ZSwgbG9hZGluZzogZmFsc2UsIGlzRW1wbG95ZWU6IGZhbHNlIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5zaG93TG9hZGVyID0gZmFsc2UKICAgIH0sIDEwMCkKICAgIGlmICghZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy8nIH0pCiAgICB9CiAgICBpZiAoCiAgICAgIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlci5lbWFpbC5pbmNsdWRlcyhCVVNJTkVTU19ET01BSU4pICYmCiAgICAgICFmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIuZW1haWxWZXJpZmllZAogICAgKSB7CiAgICAgIGFsZXJ0KCdQbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWwnKQogICAgICBsb2NhdGlvbi5yZXBsYWNlKCcvJykKICAgIH0KICAgIGlmICgKICAgICAgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsLmluY2x1ZGVzKEJVU0lORVNTX0RPTUFJTikgJiYKICAgICAgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsVmVyaWZpZWQKICAgICkgewogICAgICB0aGlzLmlzRW1wbG95ZWUgPSB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTdWJtaXQoZGF0YSkgewogICAgICBjb25zdCBmZWF0dXJlZCA9IHRoaXMuJHJlZnNbJ2ZlYXR1cmVkJ10KICAgICAgY29uc3QgeyBsYXRpdHVkZSwgbG9uZ2l0dWRlIH0gPSBmZWF0dXJlZAogICAgICBpZiAoIWxhdGl0dWRlIHx8ICFsb25naXR1ZGUpIHsKICAgICAgICBhbGVydCgnUGxlYXNlIHBpY2sgYSBsb2NhdGlvbiBvbiB0aGUgbWFwJykKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBlbWFpbCwKICAgICAgICAgIGRpc3BsYXlOYW1lLAogICAgICAgICAgcGhvdG9VUkwsCiAgICAgICAgICB1aWQsCiAgICAgICAgfSA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcgogICAgICAgIGNvbnN0IGlkID0gcmFuZG9tU3RyaW5nKDE1KQogICAgICAgIGNvbnN0IGV2ZW50ID0gewogICAgICAgICAgLi4uZGF0YSwKICAgICAgICAgIGVtYWlsLAogICAgICAgICAgZGlzcGxheU5hbWUsCiAgICAgICAgICBwaG90b1VSTCwKICAgICAgICAgIHVpZCwKICAgICAgICAgIGxhdGl0dWRlLAogICAgICAgICAgbG9uZ2l0dWRlLAogICAgICAgICAgaWQsCiAgICAgICAgfQogICAgICAgIGNvbnN0IGZpcmVzdG9yZSA9IGZpcmViYXNlLmZpcmVzdG9yZSgpCiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdldmVudHMnKQogICAgICAgIGNvbGxlY3Rpb24KICAgICAgICAgIC5kb2MoaWQpCiAgICAgICAgICAuc2V0KGV2ZW50KQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgIHRpdGxlOiAnRXZlbnQgY3JlYXRlZCcsCiAgICAgICAgICAgICAgdGV4dDogJ0RvIHlvdSB3YW50IHRvIHZpZXcgaXRzIGRldGFpbHM/JywKICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1ZpZXcgZGV0YWlscycsCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0Rpc21pc3MnLAogICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIHBhdGg6IGAvP2xhdGl0dWRlPSR7ZmVhdHVyZWQubGF0aXR1ZGV9JmxvbmdpdHVkZT0ke2ZlYXR1cmVkLmxvbmdpdHVkZX1gLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgU3dhbC5maXJlKCdPb3BzLi4uJywgJ1NvbWV0aGluZyB3ZW50IHdyb25nIScsICdlcnJvcicpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgICAgfSkKICAgICAgfQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/events/new","sourcesContent":["<template>\n  <div>\n    <full-page-loader v-show=\"showLoader\" />\n    <div v-show=\"!showLoader\">\n      <navbar />\n      <featured ref=\"featured\" theme=\"bg-wael text-white\" />\n      <event-form\n        @submit=\"handleSubmit\"\n        :loading=\"loading\"\n        :isEmployee=\"isEmployee\"\n      />\n      <app-footer />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navbar from '@/components/navbar'\nimport Featured from '@/components/featured'\nimport EventForm from '@/components/forms/event'\nimport AppFooter from '@/components/app-footer'\nimport firebase from 'firebase'\nimport Swal from 'sweetalert2'\nimport { randomString } from '@/utils'\nimport { BUSINESS_DOMAIN } from '../../../constants'\nimport FullPageLoader from '@/components/loaders/full-page-loader'\nexport default {\n  name: 'NewEvent',\n  components: {\n    Navbar,\n    Featured,\n    EventForm,\n    AppFooter,\n    FullPageLoader,\n  },\n  data() {\n    return { showLoader: true, loading: false, isEmployee: false }\n  },\n  mounted() {\n    setTimeout(() => {\n      this.showLoader = false\n    }, 100)\n    if (!firebase.auth().currentUser) {\n      this.$router.push({ path: '/' })\n    }\n    if (\n      firebase.auth().currentUser.email.includes(BUSINESS_DOMAIN) &&\n      !firebase.auth().currentUser.emailVerified\n    ) {\n      alert('Please verify your email')\n      location.replace('/')\n    }\n    if (\n      firebase.auth().currentUser.email.includes(BUSINESS_DOMAIN) &&\n      firebase.auth().currentUser.emailVerified\n    ) {\n      this.isEmployee = true\n    }\n  },\n  methods: {\n    handleSubmit(data) {\n      const featured = this.$refs['featured']\n      const { latitude, longitude } = featured\n      if (!latitude || !longitude) {\n        alert('Please pick a location on the map')\n      } else {\n        const {\n          email,\n          displayName,\n          photoURL,\n          uid,\n        } = firebase.auth().currentUser\n        const id = randomString(15)\n        const event = {\n          ...data,\n          email,\n          displayName,\n          photoURL,\n          uid,\n          latitude,\n          longitude,\n          id,\n        }\n        const firestore = firebase.firestore()\n        const collection = firestore.collection('events')\n        collection\n          .doc(id)\n          .set(event)\n          .then(() => {\n            this.loading = false\n            Swal.fire({\n              title: 'Event created',\n              text: 'Do you want to view its details?',\n              icon: 'success',\n              showCancelButton: true,\n              confirmButtonText: 'View details',\n              cancelButtonText: 'Dismiss',\n            }).then((result) => {\n              if (result.value) {\n                this.$router.push({\n                  path: `/?latitude=${featured.latitude}&longitude=${featured.longitude}`,\n                })\n                window.scrollTo({ top: 0, behavior: 'smooth' })\n              }\n            })\n          })\n          .catch((error) => {\n            this.loading = false\n            Swal.fire('Oops...', 'Something went wrong!', 'error')\n            console.log(error)\n          })\n      }\n    },\n  },\n}\n</script>\n<style scoped>\nheader {\n  padding: 156px 0 100px;\n}\n\nsection {\n  padding: 150px 0;\n}\n</style>\n"]}]}